<settings xmlns="http://maven.apache.org/SETTINGS/1.0.0" 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/SETTINGS/1.0.0
                      http://maven.apache.org/xsd/settings-1.0.0.xsd">

    <activeProfiles>
        <activeProfile>github</activeProfile>
        <activeProfile>ci-optimizations</activeProfile>
    </activeProfiles>

    <profiles>
        <profile>
            <id>github</id>
            <repositories>
                <repository>
                    <id>central</id>
                    <url>https://repo1.maven.org/maven2</url>
                    <releases>
                        <enabled>true</enabled>
                    </releases>
                    <snapshots>
                        <enabled>true</enabled>
                    </snapshots>
                </repository>
                <repository>
                    <id>github</id>
                    <name>GitHub gartcimore Apache Maven Packages</name>
                    <url>https://maven.pkg.github.com/gartcimore/javamail4ews</url>
                    <releases>
                        <enabled>true</enabled>
                    </releases>
                    <snapshots>
                        <enabled>true</enabled>
                    </snapshots>
                </repository>
            </repositories>
        </profile>
        
        <!-- CI/CD optimizations profile -->
        <profile>
            <id>ci-optimizations</id>
            <properties>
                <!-- Optimize Maven execution for CI environment -->
                <maven.wagon.http.retryHandler.count>3</maven.wagon.http.retryHandler.count>
                <maven.wagon.http.retryHandler.class>standard</maven.wagon.http.retryHandler.class>
                <maven.wagon.http.pool>false</maven.wagon.http.pool>
                <http.keepAlive>false</http.keepAlive>
                
                <!-- Reduce verbosity in CI logs -->
                <maven.test.redirectTestOutputToFile>true</maven.test.redirectTestOutputToFile>
                <maven.compiler.showWarnings>false</maven.compiler.showWarnings>
                <maven.compiler.showDeprecation>false</maven.compiler.showDeprecation>
                
                <!-- Optimize dependency resolution -->
                <maven.artifact.threads>4</maven.artifact.threads>
            </properties>
        </profile>
    </profiles>

    <servers>
        <server>
            <id>github</id>
            <!-- Use GITHUB_ACTOR (automatically provided) or fallback to GITHUB_USERNAME -->
            <username>${env.GITHUB_ACTOR}</username>
            <password>${env.GITHUB_TOKEN}</password>
        </server>
    </servers>
</settings>